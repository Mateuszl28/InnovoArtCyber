<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CyberGuardian 2026 — Hackathon Edition</title>
  <meta name="theme-color" content="#04060d" />
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Background generative art canvas -->
  <canvas id="bg-art"></canvas>

  <header>
    <div class="wrap row between">
      <h1>🛡️ <span class="cyber">CyberGuardian 2026</span></h1>
      <div class="row gap8">
        <button id="btn-leaderboard" class="btn ghost">🏆 Leaderboard</button>
        <button id="btn-poster" class="btn ghost">🖼️ Poster</button>
        <button id="btn-install" class="btn secondary">⬇ Install App</button>
      </div>
    </div>
  </header>

  <main class="wrap">

    <!-- MAIN MENU -->
    <section id="menu" class="screen center">
      <h2>Choose your mission</h2>
      <p class="muted">Learn cyber security through interactive art & gameplay.</p>

      <div class="menu-grid">
        <button data-mode="quiz" class="mode-btn">🎯 Classic Quiz</button>
        <button data-mode="spot" class="mode-btn">🕵️ Spot The Phish</button>
        <button data-mode="forge" class="mode-btn">🔐 Password Forge</button>
        <button data-mode="story" class="mode-btn">💾 Cyber Heist (Story)</button>
        <button data-mode="practice" class="mode-btn">⚡ Marathon (8 Qs)</button>
        <button data-mode="vs" class="mode-btn accent">⚔ Multiplayer VS</button>
      </div>
    </section>

    <!-- QUIZ GAME -->
    <section id="screen-game" class="screen" hidden>
      <div class="row between">
        <div class="stat small">Mode: <span id="gameModeLabel"></span></div>
        <div class="row tiny gap8">
          <div class="stat small">Score: <span id="scoreDisplay">0</span></div>
          <div class="stat small">Top: <span id="topDisplay">0</span></div>
        </div>
      </div>

      <div class="progress">
        <div id="progress-bar"></div>
      </div>

      <div class="card glitch-card">
        <div id="questionText" class="question-text"></div>
      </div>

      <div id="answers" class="answers"></div>

      <div class="row between">
        <span id="questionCounter"></span>
        <button id="btn-skip" class="btn ghost">Skip</button>
      </div>
    </section>

    <!-- SPOT THE PHISH -->
    <section id="screen-spot" class="screen" hidden>
      <h2>Spot the Phish</h2>
      <p class="muted">Pick the fake webpage or email.</p>
      <div class="spot-grid" id="spotGrid"></div>
      <button id="spot-next" class="btn">Next</button>
      <button id="spot-exit" class="btn ghost">Exit</button>
    </section>

    <!-- PASSWORD FORGE -->
    <section id="screen-forge" class="screen" hidden>
      <h2>Password Forge</h2>
      <div class="card">
        <label>Type a password</label>
        <input id="pwdInput" placeholder="Start typing..." />
        <div id="pwdStrength" class="pwd-strength">Strength: —</div>
        <button id="pwd-check" class="btn">Accept</button>
        <button id="pwd-exit" class="btn ghost">Back</button>
      </div>
    </section>

    <!-- STORY MODE -->
    <section id="screen-story" class="screen" hidden>
      <h2>Cyber Heist — Story Mode</h2>
      <div class="card">
        <div id="storyText"></div>
      </div>
      <div id="storyChoices" class="answers"></div>
      <button id="story-exit" class="btn ghost">Exit</button>
    </section>

    <!-- VS SETUP -->
    <section id="screen-vs-setup" class="screen" hidden>
      <h2>⚔ Multiplayer VS</h2>
      <div class="card">
        <p class="muted">Choose Local Hotseat or Peer-to-Peer (copy/paste signaling, no server required).</p>
        <div class="row gap8">
          <button id="vs-local" class="btn">🧑‍🤝‍🧑 Local Hotseat</button>
          <button id="vs-p2p" class="btn secondary">🌐 P2P WebRTC</button>
          <button id="vs-exit" class="btn ghost">Back</button>
        </div>
      </div>

      <div id="vs-p2p-setup" class="card" hidden>
        <h3>P2P Setup</h3>
        <div class="row gap8">
          <button id="vs-host" class="btn">I am Host</button>
          <button id="vs-guest" class="btn">I am Guest</button>
        </div>
        <div id="vs-host-box" class="p2p-box" hidden>
          <label>Your Offer (copy & send)</label>
          <textarea id="vs-offer" rows="6"></textarea>
          <label>Paste Guest Answer</label>
          <textarea id="vs-answer" rows="6" placeholder="Paste answer here"></textarea>
          <button id="vs-accept" class="btn">Accept Answer & Start</button>
        </div>
        <div id="vs-guest-box" class="p2p-box" hidden>
          <label>Paste Host Offer</label>
          <textarea id="vs-remote-offer" rows="6"></textarea>
          <button id="vs-gen-answer" class="btn">Generate Answer</button>
          <label>Your Answer (copy & send)</label>
          <textarea id="vs-guest-answer" rows="6"></textarea>
        </div>
      </div>
    </section>

    <!-- VS GAME -->
    <section id="screen-vs" class="screen" hidden>
      <h2>VS Battle</h2>
      <div class="row between">
        <div class="stat">P1: <span id="vs-p1">0</span></div>
        <div class="stat">P2: <span id="vs-p2">0</span></div>
      </div>
      <div class="progress"><div id="vs-progress"></div></div>
      <div class="card">
        <div id="vs-question" class="question-text"></div>
      </div>
      <div id="vs-answers" class="answers"></div>
      <button id="vs-end" class="btn ghost">End Match</button>
    </section>

    <!-- RESULT -->
    <section id="screen-result" class="screen" hidden>
      <h2 id="resultTitle"></h2>
      <p id="resultDescription" class="muted"></p>
      <div id="badgeEarned" class="badgeBig"></div>

      <button id="result-poster" class="btn">Generate Poster</button>
      <button id="result-menu" class="btn ghost">Main Menu</button>
      <button id="result-leaderboard" class="btn secondary">Submit Score</button>
    </section>

    <!-- LEADERBOARD -->
    <section id="screen-leaderboard" class="screen" hidden>
      <h2>Leaderboard</h2>
      <div id="leaderboardList" class="card"></div>
      <button id="lb-back" class="btn ghost">Back</button>
      <button id="lb-clear" class="btn ghost">Clear local</button>
    </section>

    <!-- Hidden poster canvas -->
    <canvas id="posterCanvas" width="1024" height="1024"></canvas>

  </main>

  <!-- AUDIO -->
  <audio id="bgMusic" loop src="assets/audio/synthwave.mp3"></audio>
  <audio id="sfxCorrect" src="assets/audio/correct.wav"></audio>
  <audio id="sfxWrong" src="assets/audio/wrong.wav"></audio>

  <button id="soundToggle">🔊</button>

  <!-- PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <script src="app.js"></script>
  <script>
    // PWA registration
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("sw.js").catch(console.warn);
      });
    }
  </script>
</body>
</html>
